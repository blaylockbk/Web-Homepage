
<html>

<head>
<title>HRRR Custom</title>
<link rel="stylesheet" href="./css/brian_style.css" />
<script src="./js/site/siteopen.js"></script>

<script>
    
    
    function GetUserLocation(){
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
            alert('geolocation not working for some reason. Sorry :(');
        }
    }

    function showPosition(position) {
        document.getElementById('location').value = position.coords.latitude.toFixed(2) + ',' + position.coords.longitude.toFixed(2);
    }

    function InitialImage(){
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(changeInitialImage);
        } else { 
            alert('geolocation not working for some reason. Sorry :(');
        }
    }
    function changeInitialImage(position) {
        var now = new Date;
        var stringDate = now.getFullYear()+'-'+(now.getMonth() + 1)+'-'+now.getDate()+'_'+now.getHours()+'00';
        var lat = position.coords.latitude.toFixed(2);
        var lon = position.coords.longitude.toFixed(2);
        document.getElementById('MapImage').src = 'http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/cgi-bin/hrrr_custom.cgi?model=hrrr&valid='+stringDate+'&fxx=0&location='+lat+','+lon+'&plotcode=Barbs10mWind,FilldBZ&dsize=small&background=arcgis';
    }    
        
    
    function SetBlank(){
        document.getElementById('MapImage').src = 'http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/images/empty.jpg'
    }
    function ChangeImage(){
        
        /*Create HTML string for changing picture*/
        var URL = 'http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/cgi-bin/hrrr_custom.cgi'
        + '?model=' + document.querySelector('input[name="model"]:checked').value
        + '&valid=' + document.getElementById('valid').value
        + '&fxx=' + document.getElementById('fxx').value
        + '&location=' + document.getElementById('location').value
        + '&plotcode=' + $('#plotcode').val()
        + '&dsize=' + document.querySelector('input[name="dsize"]:checked').value
        + '&background=' + document.querySelector('input[name="background"]:checked').value;

        /*
        alert(URL);
        alert(document.querySelector('input[name="background"]:checked').value);
        */

        /*Set image as the new picture*/
        document.getElementById('MapImage').src = URL

    }
</script>

</head>


<body onload="InitialImage();">
<a name="TOP"></a>
<script src="./js/site/sitemenu.js"></script>	

<h1 align="center"><i class="fa fa-map-o" aria-hidden="true"></i> HRRR Custom Surface Maps</h1>

<center>
<div class="row" id="content">
    <div class=" col-md-1">
    </div>
    <div class=" col-md-2">
<a class='btn btn-danger' role='button' href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_golf.html" style="width:100%"> <i class="fa fa-map-marker" aria-hidden="true"></i> Point Forecast</a>      
    </div>
    <div class="col-md-2">
<a class='btn btn-danger' role='button' href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_fires.html" style="width:100%"><i class="fa fa-free-code-camp" aria-hidden="true"></i> Fires Forecast</a>
    </div>
    <div class="col-md-2">
<a class='btn btn-danger active' role='button' href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_custom.html" style="width:100%"> <i class="fa fa-map-o" aria-hidden="true"></i> Custom Maps</a>
    </div>
    <div class="col-md-2">
<a class='btn btn-danger' role='button' href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/cgi-bin/hrrrX-hrrr.cgi" style="width:100%"> <i class="fa fa-map" aria-hidden="true"></i> Compare Maps</a>
    </div>
    <div class="col-md-2">
<a class='btn btn-danger' role='button' href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_FAQ.html" style="width:100%"> <i class="fa fa-database" aria-hidden="true"></i> HRRR Archive</a>
    </div>
</div>
</center>



<center>
<div class="row" style="margin:50px"><div class="col-sm-1"></div><div class="col-sm-4" style="min-width:400px">

<div id="container">

<form class="form-horizontal">
    
    <div class="form-group">
      <label data-toggle="tooltip" title="Kind of need to know what is available for each model" class="control-label col-sm-3" for="email">Model:</label>
      <div class="col-sm-9">
        <div class="btn-group btn-group-justified" data-toggle="buttons">
            <label class="btn btn-default active">
                <input type="radio" name="model" value='hrrr' checked> HRRR
            </label>
            <label class="btn btn-default">
                <input type="radio" name="model" value='hrrrX'> HRRR-X
            </label>
            <label class="btn btn-default">
                <input type="radio" name="model" value='hrrrAK'> HRRR-Ak
            </label>
        </div>
      </div>

    </div>

    <div class="form-group">
      <label class="control-label col-sm-3" data-toggle="tooltip" title="Format: YYYY-MM-DD_hhmm" >Valid Date/Time:</label>
      <div class="col-sm-9">
        <input type="text" required class="form-control" id="valid" placeholder="YYYY-MM-DD_hhmm">
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-3" data-toggle="tooltip" title="Forecast Hour">Forecast:</label>
      <div class="col-sm-9">
        <select class="form-control" id="fxx">
        <option selected value='0'>f00</option>
        <option value='1'>f01</option>
        <option value='2'>f02</option>
        <option value='3'>f03</option>
        <option value='4'>f04</option>
        <option value='5'>f05</option>
        <option value='6'>f06</option>
        <option value='7'>f07</option>
        <option value='8'>f08</option>
        <option value='9'>f09</option>
        <option value='10'>f10</option>
        <option value='11'>f11</option>
        <option value='12'>f12</option>
        <option value='13'>f13</option>
        <option value='14'>f14</option>
        <option value='15'>f15</option>
        <option value='16'>f16</option>
        <option value='17'>f17</option>
        <option value='18'>f18</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-3" data-toggle="tooltip" title="Either a MesoWest Station ID or latitude,longitude separated by a comma w/o spaces">Map Center Point:</label>
      <div class="col-sm-6">
        <input type="text" required class="form-control" id="location" placeholder="ex: KSLC or 40.8,-111.9">
      </div>
      <div class="col-sm-3">
        <button  data-toggle="tooltip" title='Must be in CONUS' type="button" onclick="GetUserLocation();" class="btn btn-sm btn-default">My Location</button>
      </div>
    </div>


    <div class="form-group">
      <label class="control-label col-sm-3" data-toggle="tooltip" title="Select one or more options by holding ctrl when you click or draging mouse">Add to the map:</label>
      <div class="col-sm-9">
        <select multiple class="form-control" id="plotcode">
        <option selected value='Barbs10mWind'>10m Wind Barbs</option>
        <option value='Barbs80mWind'>80m Wind Barbs</option>
        <option value='Shade10mWind'>Highlight high 10m Winds (hourly max speed)</option>
        <option value='Shade80mWind'>Highlight high 80m Winds</option>
        <option value='HatchSfcGust'>Hatch Surface Wind Gust</option>
        <option value='FilldBZ'>Simulated Compostie Radar (Fill)</option>
        <option value='ContdBZ'>Simulated Compostie Radar (Contour)</option>
        <option value='Fill2mTemp'>Surface Temperature (Fill)</option>
        <option value='Fill2mRH'>Surface Relative Humidity (Fill)</option>
        <option value='ContFreeze'>Freezing Temperature Contour</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-3" data-toggle="tooltip" title="Approximate domain size with point at center">Domain Size:</label>
      <div class="col-sm-9">
        <div class="btn-group btn-group-justified" data-toggle="buttons">
            <label class="btn btn-default">
                <input type="radio" name="dsize" value='small'> <span style="font-size:9"><i class="fa fa-stop" aria-hidden="true"></i></span> 50 km<sup>2</sup>
            </label>
            <label class="btn btn-default active">
                <input type="radio" name="dsize" value='medium' checked> <span style="font-size:12"><i class="fa fa-stop" aria-hidden="true"></i></span> 150 km<sup>2</sup>
            </label>
            <label class="btn btn-default">
                <input type="radio" name="dsize" value='large'> <span style="font-size:15"><i class="fa fa-stop" aria-hidden="true"></i></span> 400 km<sup>2</sup>
            </label>
            <label class="btn btn-default">
                <input type="radio" name="dsize" value='xlarge'> <span style="font-size:18"><i class="fa fa-stop" aria-hidden="true"></i></span> 800 km<sup>2</sup>
            </label>
            <label class="btn btn-default">
                <input type="radio" name="dsize" value='xxlarge'> <span style="font-size:21"><i class="fa fa-stop" aria-hidden="true"></i></span> 2,000 km<sup>2</sup>
            </label>
        </div>
      </div>
    </div>

    <!-- Accordian Advanced Options-->
    <div class="panel-group">
    <div class="panel panel-default">
        <div class="panel-heading">
        <h4 class="panel-title">
        <a data-toggle="collapse" href="#collapse1">Advanced Options</a>
        </h4>
        </div>
    
            <div id="collapse1" class="panel-collapse collapse">
                <div class="panel-body">
                <div class="form-group"  style="margin-left:1px;margin-right:1px">
                <label class="control-label">Background Image:</label>
                            <div>
                                <div class="btn-group btn-group-justified" data-toggle="buttons">
                                    <label class="btn btn-default active">
                                        <input data-toggle="tooltip" title="ArcGIS Shaded Relief" type="radio" name="background" value='arcgis' checked> <i class="fa fa-globe" aria-hidden="true"></i>
                                    </label>
                                    <label class="btn btn-default">
                                        <input data-toggle="tooltip" title="ArcGIS Imagery" type="radio" name="background" value='arcgisSat'> <img src='./images/icon_satellite.svg' width='20px'>
                                    </label>
                                    <label class="btn btn-default">
                                        <input data-toggle="tooltip" title="Model Terrain (200m Contours)" type="radio" name="background" value='terrain'> <i class="fa fa-wifi fa-rotate-180" aria-hidden="true"></i>
                                    </label>
                                    <label class="btn btn-default">
                                        <input data-toggle="tooltip" title="Model Landuse" type="radio" name="background" value='landuse'> <i class="fa fa-tree" aria-hidden="true"></i>
                                    </label>
                                    <label class="btn btn-default">
                                        <input data-toggle="tooltip" title='When you click this you are really saying "I hate background images"' type="radio" name="background" value='none'> None
                                    </label>
                                </div>
                            </div>
                            <hr>
                            <p> Features coming soon, but can't now becuase CHPC doesn't have shapefile installed on this version of Python
                            <p><input type="checkbox" id="outlineRoads"> Utah Roads</input>
                            <p><input type="checkbox" id="outlineFires"> Fire outlines</input>
                            <p><input type="checkbox" id="ScatterMesoWest"> MesoWest Station Locations</input>
                </div>
                </div>
            </div>


    </div>
    </div> 
  


    <div class="form-group">        
        <div class="col-sm-offset-2 col-sm-9">
            <button  data-toggle="tooltip" title='After clicking me, count to 30 (plot takes awhile)' type="button" onclick="ChangeImage();" class="btn btn-lg btn-success" style="width:45%;min-width:100px">Submit</button>
            <br><br>
            <div class="well well-sm">Be patient when creating graphics. They take awhile to make. I need to add an "image loading" spinning icon, but I don't know how to do that yet.</div>
        </div>
    </div>
  </form>
</div>
<p><a href="https://github.com/blaylockbk/Web-Homepage/blob/master/hrrr_custom.html" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Page HTML code</a>
<p><a href="https://github.com/blaylockbk/Web-Homepage/blob/master/cgi-bin/hrrr_custom.cgi" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Image Python/CGI code</a>
</div>

<div class="col-sm-6">
<img class='style1' id='MapImage' style="width=100%;max-width:700px" src='http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/cgi-bin/hrrr_custom.cgi?model=hrrr&valid=2017-06-01_0000&fxx=0&location=KSLC&plotcode=Barbs10mWind,FilldBZ&dsize=medium&background=arcgis'>
</div><div class="col-sm-1"></div>
</div>

</center>
<br>

<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();   
});
</script>

<script src="./js/site/siteclose.js"></script>
</body>
</html>
