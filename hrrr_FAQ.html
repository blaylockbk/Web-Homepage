<html>

<head>
    <title>HRRR Archive FAQ</title>
    
    <script src="./js/site/siteopen.js"></script>
</head>


<body>
    <a name="TOP"></a>
    <script src="./js/site/sitemenu.js"></script>

    <br>

    <div id="content">      

        <h1 align="center">HRRR Archive at the University of Utah</h1>
        <h2 align="center"><i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>Frequently Asked Questions</h2>
        
             
            
            <div class="alert alert-warning">If you are looking for most 
                current HRRR output (last two days) you should download directly from the
                <a href="http://www.nomads.ncep.noaa.gov/pub/data/nccf/com/hrrr/prod/">NOMADS</a> server.
            </div>
            
            
        <div class="row">
            <div class="col-md-offset-3 col-md-3">
                    <a href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_download_register.html" class="btn btn-danger btn-block">
                    <i class="fa fa-user-plus" aria-hidden="true"></i> Have you Registered?</a>        
            </div>
            <div class="col-md-3">
                    <a href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_practices.html" target="_blank" class="btn btn-warning btn-block">
                    <i class="fa fa-handshake-o" aria-hidden="true"></i> Best Practices</a>
            </div>
        </div>

<br>
        
        

  <!-- Tabs -->
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#tab1"><i class="fa fa-globe" aria-hidden="true"></i> About this HRRR archive</a></li>
    <li><a data-toggle="tab" href="#tab2"><i class="fa fa-user" aria-hidden="true"></i> Who archives HRRR?</a></li>
    <li><a data-toggle="tab" href="#tab3"><i class="fa fa-database" aria-hidden="true"></i> Where is the archive?</a></li>
    <li><a data-toggle="tab" href="#tab4"><i class="fa fa-calendar" aria-hidden="true"></i> What days are available?</a></li>
    <li><a data-toggle="tab" href="#tab5"><i class="fa fa-users" aria-hidden="true"></i> Who uses the HRRR archive?</a></li>
    <li><a data-toggle="tab" href="#tab6"><i class="fa fa-desktop" aria-hidden="true"></i> Tips for CHPC users</a></li>
  </ul>

    <div class="tab-content">
        <div id="tab1" class="tab-pane fade in active">
            <img align=right width="450px" style="padding:5px 15px 5px 5px" src="https://rapidrefresh.noaa.gov/hrrr/hrrrcrefimage">
            <h3><i class="fa fa-globe" aria-hidden="true"></i> About this HRRR archive</h3>
            <h3>What is the HRRR archive?</h3>
            <p>The HRRR archive is a collection of output from NCEP's High Resolution Rapid Refresh model. This
            is a model developed by NOAA ESRL and is run operationally every hour at NCEP. It continues to be developed by ESRL.
            <p>The HRRR generates hourly forecasts gridded at 3 km for 18 hours over the continental United
            States making it the highest spatial and temporal resolution forecast system run by NCEP.
            <p>Instead of downloading all available files, we only download files
            most useful to accomplish our research efforts. For the time being, 
            we are making the archive publicly accessible for research purposes.
            <p>HRRR grib2 files are large. For instance, sfc files are >120 MB 
            and prs files are >380 MB each. If you download a day's worth of
            prs analyses, thats over 9 GB!
            <p>Output files, in grib2 format, contained in the archive include:
            <ul style="padding-left:60px;">
                <li>Operational HRRR
                    <ul style="padding-left:40px">
                        <li>Surface (sfc) fields for analyses (beginning April 18, 2015) and forecast hours (beginning July 15, 2016)
                            <ul style="padding-left:40px">
                                <li>File format: hrrr.t00z.wrfsfcf00.grib2
                                <li>File size: ~120 MB
                                <li>Bufr files also available for KSLC, KODG, and KPVU
                            </ul>
                        <li>Pressure (prs) fields for analyses (beginning April 18, 2015)
                            <ul style="padding-left:40px">
                                <li>File format: hrrr.t00z.wrfprsf00.grib2
                                <li>File size: ~380 MB
                            </ul>
                    </ul>
                <li>Experimental HRRR
                    <ul style="padding-left:40px">
                        <li>Surface (sfc) fields for analyses (beginning December 1, 2016)
                            <ul style="padding-left:40px">
                                <li>File format: hrrrX.t00z.wrfsfcf00.grib2
                                <li>File size: ~120 MB
                            </ul>

                    </ul>
                <li>Alaska HRRR (experimental)
                    <ul style="padding-left:40px">
                        <li>Surface (sfc) fields for analyses and forecast hours (beginning September 1, 2016)
                            <ul style="padding-left:40px">
                                <li>File format: hrrrAK.t00z.wrfsfcf00.grib2
                                <li>File size: ~6 MB
                                <li>Only selected variables retained.
                            </ul>
                        <li>Pressure (prs) fields for analyses (beginning September 1, 2016)
                            <ul style="padding-left:40px">
                                <li>File format: hrrrAK.t00z.wrfprsf00.grib2
                                <li>File size: ~205 MB
                            </ul>

                    </ul>    
            </ul>

            <p>Some days and hours in our archive may not be available. Either
            the forecast wasn't run that hour (typical for the experimental models),
            or our download scripts failed to download everything.
            
            <hr>
            <h3>Where does the HRRR output come from?</h3>
            <p>The operational HRRR (hrrr) is downloaded via HTTP from the <a href="http://nomads.ncep.noaa.gov/">NOMADS server</a>.
            <p>Experimental HRRR (hrrrX) and HRRR Alaska (hrrrAK) are downloaded via FTP from NOAA ESRL (credentials required).
            <hr>
            <h3>What version of HRRR is in this archive?</h3>
            <p><b>HRRRv1</b> was the operational model prior to August 23, 2016.
            We downloaded the operational HRRR from here: http://nomads.ncep.noaa.gov/pub/data/nccf/nonoperational/com/hrrr/prod/.
            Although the URL says "nonoperational", it was the operational HRRR. The
            files just hadn't been moved to the operational space.
            <p><b>HRRRv2</b> was implemented at NCEP on August 23, 2016 for the 12z run. That day I
            began downloading from the new URL: <a href="http://nomads.ncep.noaa.gov/pub/data/nccf/com/hrrr/prod/">http://nomads.ncep.noaa.gov/pub/data/nccf/com/hrrr/prod/</a>.
            <p>For more details on the HRRRv2 implementation, check out the 
            following announcement: <a href="http://www.nws.noaa.gov/om/notification/tin16-26rap_hrrrraaa.htm">http://www.nws.noaa.gov/om/notification/tin16-26rap_hrrrraaa.htm</a>
            <p><b>HRRRv3</b> is the current experimental version under development and testing at ESRL.

            <hr>
            <h3>Why do we archive the HRRR?</h3>
            <p>To our knowledge, there is no HRRR archive that is publicly and easily 
            available. This HRRR archive has been created to support various research
            endeavours in the Department of Atmospheric Sciences at the Univerisity of Utah.
            What we do includes:
            <ol style="padding-left: 60;">
            <li>Initialize the Weather Research and Forecast (WRF) model with HRRR analyses as initial
            and boundary conditions. <a href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr.html">More info here</a>.
            <li>Model verification where HRRR analyses and forecasts are compared to observed conditions.
            </ol>

            <hr>
            <h3>When do we download the HRRR data?</h3>
            <p>HRRR output for each day is downloaded from the NOMADS and ESRL
            servers each evening (Mountain Time) after 0000 UTC.
            <p>This HRRR archive is not meant to be used for real-time or operational products.

            <hr>
            <img align=right \
             width='350px' \
             class='style1' \
             style="margin-left:15px;margin-bottom:15px"\
             src='./images/mouse.jpg' \
             title="We give people a little, and they start asking for a lot.">
            <h3>Vision for the Future</h3>
            <p> At the 2017 Annual AMS meeting I talked with a guy on the the
            AMS Board on Data Stewarship. He said the lack of 
            a HRRR archive was one concern brought up at their board meeting.
            <p>Archiving high resolution model data is an expensive task. 
            This is a growing issue in the atmospheric science community
            as we move to higher resolution models that generate terabytes of
            data annually.
            Perhaps the solution is in cloud computing where the archive can be
            kept in one place and researchers can use cloud resources to 
            process the data, perform analyses, and initialize WRF simulations
            without downloading the model output on their own systems.               
            <p>Until that happens, I would like to make this archive easily
            available to everyone to demonstrate the interest and need for 
            having such an archive.
            This archive has already proven to be beneficial to many 
            researchers with many applications.
            In the future, it is possible to have server-side data processing
            that generate time series or wind roses for point locations 
            in the HRRR model. In short, this project is turning into a classic
            case of one of my favorite children's books If You Give A Mouse A
            Cookie where starting one thing has grown and continues to grow
            into something bigger.

        </div>

        <div id="tab2" class="tab-pane fade">
			<h3><i class="fa fa-user" aria-hidden="true"></i> Who is archiving the HRRR data?</h3>
            <p>The HRRR archive at the University of Utah is managed by the 
            <a href="http://meso1.chpc.utah.edu/mesowest_overview/" target="_blank">MesoWest group</a>
            on resourses at Utah's <a href="https://www.chpc.utah.edu/" target="_blank">Center for High Performance Computing</a>.
            <p>While you can find current HRRR output on the <a href="http://www.nomads.ncep.noaa.gov/">NOMADS server</a>,
            there is no official archive. To our knowledge, this is the only HRRR archive.
            <p> As a courtesy, please register before downloading from the archive.
            <br><a href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_download_register.html" class="btn btn-danger">
            <i class="fa fa-user-plus" aria-hidden="true"></i> Have you Registered?</a>
            
        </div>

        <div id="tab3" class="tab-pane fade">
            <img src="./images/HRRR_pando.jpg" align="right" width="250px" style="padding:5px">
            <h3><i class="fa fa-database" aria-hidden="true"></i> Where is the University of Utah HRRR archive?</h3>
            <p>The physical archive is located at the University of Utah
            Downtown Data Center in Salt Lake City, Utah. It is hosted on 
            Utah's Center for High Performance Computing PANDO archive storage 
            system. This archive system is similar to Amazon's S3 storage, but
            this is less expensive. We are currently using almost 20 TB of 
            our 30 TB allocation.
            <p>But you probably aren't interested in it's physical location.
            You want to know where you go to download from it. Our HRRR archive
            is made available for research purposes.
            We only ask that you fill out the registration form to help us 
            keep track of total usage.
            After registering you will be redirected to the download page. 
            There you will also find instructions for writing your own download
            scripts.
            <a href="http://home.chpc.utah.edu/~u0553130/Brian_Blaylock/hrrr_download_register.html" class="btn btn-danger btn-lg">
            <i class="fa fa-user-plus" aria-hidden="true"></i> Register to download HRRR</a>
            <img src="./images/hrrr_dwnld_page.PNG" class="style1" width="400px">
        </div>            

        <div id="tab4" class="tab-pane fade">
            <h3><i class="fa fa-calendar" aria-hidden="true"></i> What days are available to download?</h3>
            <p>We began downloading HRRR analyses for each hours on April 18, 2015 and have continued to download
            since then (with some hiccups here and there).
            <p>Prior to July 27, 2016 only the analysis hours for the pressure and surface fields were
            downloaded from the NOMADS server.
            <p>On July 27, 2016 I began downloading the surface field forecast
            hours. (Unfortunately, the pressure field files are too large,
            ~315 MB/hr, and we have decided not to archive the forecasted pressure fields.)

            <p>The HRRR download page will give you an idea if the files you
            are looking for are available.

            <p> In summary:
            <ul style="padding-left: 60px;">
                <li>2015-04-18: Archive begins with analyses hours only
                <li>2016-07-27: started grabbing 15 hour sfc forecasts
                <li>2016-08-24: started grabbing 18 hour sfc forecasts
                <li>2016-09-01: started grabbing parts of HRRR Alaska (experimental)
                <li>2016-12-01: started grabbing experimental HRRR surface analysis
                <li>2017-03-01: HRRR archive moved from compressed space to S3 storage.
            </ul>
        </div>

        <div id="tab5" class="tab-pane fade">
            <h3><i class="fa fa-users" aria-hidden="true"></i> Who uses the HRRR archive?</h3>
            <p>Many people are interested in the HRRR archive, including yourself
            (obviously, or else you wouldn't have Googled <i>'HRRR archive'</i>).
            <p>The initial purpose of this HRRR archive was to serve atmospheric science research at the University
            of Utah, particularly my own research for my Master and PhD degrees.
             For example, I used HRRR to 
            <a href="http://journals.ametsoc.org/doi/abs/10.1175/JAMC-D-16-0216.1">initialize WRF simulations</a>.
            <p>The archive is searched quite often on Google by people like you (about one click every two or three days).
            Since this archive has been published online I have received inquiries and download requests
            from National Weather Service employees, a researcher at the National Institute of Standards
            and Technology, a United State Air Force Captain, commercial wind power companies, university
            professors, graduate students, post docs, and many others.
            <div class="alert alert-success">
                If this archive is useful to you, please contact the most 
                important person you know at NCEP and request they develop an
                official HRRR archive. Thank you <i class="fa fa-smile-o" aria-hidden="true"></i>
            </div>
        </div>

        <div id="tab6" class="tab-pane fade">
            <h3><i class="fa fa-desktop" aria-hidden="true"></i> Tips for CHPC Users</h3>
            <p>So you work/study at the University of Utah, too? Cool! Go Utes!!
            Here are a few helpful tips that will make your life easier. That is, 
            if your life involved using HRRR data from our handy archive.
            Please share with me cool stuff you learn! 
            
            <hr>
            <h3>Where is the archive?</h3>
            <p>We keep the most recent month or two in the horel-group/archive
            Modifiy the date directory for your day of interest.
            <div class="well well-sm">/uufs/chpc.utah.edu/common/home/horel-group/archive/<b>YYYYMMDD</b>/models/</div>
            <p>Then navigate to the HRRR directory you are interested:
                <ul style="padding-left: 60;">
                <li>hrrr
                <li>hrrrX
                <li>hrrr_alaska
                </ul>

            <hr>
            <h3>Downloading HRRR and moving HRRR data to the S3 Archvie</h3>
            <p>If you are interested in our process for downloading and archiving
            HRRR data, check out the GitHub repository.
            <a href="https://github.com/blaylockbk/HorelS3-Archive/">See this github repository <i class="fa fa-github fa-fw" aria-hidden="true"></i></a>

            <hr>
            <h3>How can I download multiple days at once?</h3>
            <div class="alert alert-danger"><p>This is now outdated, since you should download from the S3 archive. Register for download instructions.</div>
            But I have an old python script that will help you download many days at once.
            It downloads via the web URL, so best for you to change it to 
            copy the files from the file path.
            <a href="https://github.com/blaylockbk/Ute_other/blob/master/download_HRRR_MesoWest.py" target="_blank">
            <i class="fa fa-github fa-fw" aria-hidden="true"></i>Get from GitHub</a>

            <hr>
            <h3>How do I get the HRRR data if what I'm looking for is compressed?</h3>
            <div class="alert alert-danger"> 
            This is also outdated, but keep these around for future reference
            on getting stuff out of the compressed archive.
            </div>

            <p>If you find that what you're looking for is compressed, follow the
            following instructions to get what you need:
            <ol style="padding-left:60px">
                
                <li>
                    <p>Copy the <b>models.tar.gz</b> file to your own space. 
                    Yes, this is large (~20 GB). It contains
                    all the model data we archive (I warned you that this was inefficient).

                <li>
                    <p>Before untarring the entire directory, you can make 
                       sure it contains the files you need with something like this:
                    <div class="well well-sm" style="font-family:'Courier';">less -p /hrrr/hrrr.t models.tar.gz</div>

                <li>
                    <p>You can untar the entire file, but that would take a looooonng
                    time, and you don't need everything in that file anyways.
                    <p>You can extract just the HRRR data with this one-liner...(still
                    may take a bit of time)
                    <div class="well well-sm" style="font-family:'Courier';">tar -xzvf models.tar.gz 20160101/models/hrrr/</div>

                    <p> Or you can get more creative and use the following
                    to get just the pressure fields. (In this case
                    it helps to know the contents of the tarred file).
                    Starting in the directory you wish to copy the
                    files into, type...

                    <div class="well well-sm" style="font-family:'Courier';">
                    tar -zxvf models.tar.gz --wildcards --no-anchored 'hrrr.t*z.wrfprsf00.grib2'
                    </div>
            </ol>
            
        </div>
    </div> <!--tab-conent--> 
</div><!--content-->  
 <script src="./js/site/siteclose.js"></script>
</div><!---->
</body>

</html>